<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>K-Food Battle | ì „ ì„¸ê³„ ë¯¸ì‹ ì „ìŸ</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        :root {
            --china: #ff4d4f; --korea: #52c41a; --japan: #ffffff;
            --dark: #000000; --gold: #fbbf24; --accent: #f43f5e;
            --insta-gradient: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
        }
        body, html { margin: 0; padding: 0; height: 100%; background: #000; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; overflow: hidden; color: white; }
        
        /* ìƒë‹¨ ë‰´ìŠ¤ ë°” */
        #news-bar {
            position: fixed; top: 0; width: 100%; background: var(--insta-gradient);
            padding: 8px; font-size: 11px; font-weight: bold; z-index: 1000; text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }

        /* ìŠ¤í† ë¦¬ ìƒë‹¨ ë°” */
        #story-bar {
            position: fixed; top: 35px; width: 100%; height: 100px; 
            display: flex; gap: 15px; padding: 10px 15px; overflow-x: auto;
            background: rgba(0,0,0,0.8); z-index: 100; scrollbar-width: none;
            border-bottom: 0.5px solid #333;
        }
        #story-bar::-webkit-scrollbar { display: none; }
        .story-item { display: flex; flex-direction: column; align-items: center; min-width: 65px; }
        .story-ring {
            width: 60px; height: 60px; border-radius: 50%; padding: 2px;
            background: var(--insta-gradient); margin-bottom: 5px;
        }
        .story-ring img { width: 100%; height: 100%; border-radius: 50%; border: 2px solid black; object-fit: cover; }
        .story-name { font-size: 10px; color: #ccc; }

        /* ì¸ìŠ¤íƒ€ê·¸ë¨ ìŠ¤íƒ€ì¼ í”¼ë“œ */
        #feed-container {
            height: 100vh; overflow-y: scroll; scroll-snap-type: y mandatory;
            scrollbar-width: none; padding-top: 135px; box-sizing: border-box;
        }
        #feed-container::-webkit-scrollbar { display: none; }
        
        .feed-item {
            height: calc(100vh - 135px); width: 100%; scroll-snap-align: start;
            position: relative; background: #000; border-bottom: 1px solid #222;
        }
        
        .feed-header {
            position: absolute; top: 15px; left: 0; width: 100%; padding: 10px 15px;
            display: flex; align-items: center; gap: 10px; z-index: 20;
        }
        .profile-pic { width: 32px; height: 32px; border-radius: 50%; object-fit: cover; border: 1px solid #333; }
        .user-info { display: flex; flex-direction: column; }
        .username { font-size: 13px; font-weight: 700; }
        .location { font-size: 11px; color: #bbb; cursor: pointer; }

        .feed-bg { width: 100%; height: 100%; object-fit: cover; }

        .feed-overlay {
            position: absolute; bottom: 0; left: 0; width: 100%; padding: 60px 20px 20px;
            background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, transparent 100%);
            pointer-events: none; z-index: 10;
        }
        .status-badge { display: inline-block; padding: 4px 10px; border-radius: 4px; font-weight: 900; font-size: 11px; margin-bottom: 8px; }
        .res-title { font-size: 22px; font-weight: 800; margin: 0; }
        .feed-caption { font-size: 13px; color: #eee; margin-top: 5px; line-height: 1.4; opacity: 0.9; }

        .side-actions {
            position: absolute; right: 10px; bottom: 40px; display: flex; flex-direction: column; align-items: center; gap: 15px; z-index: 20;
        }
        .action-item { display: flex; flex-direction: column; align-items: center; cursor: pointer; pointer-events: auto; }
        .action-item span { font-size: 26px; }
        .action-item label { font-size: 11px; font-weight: 600; margin-top: 2px; }

        /* í•˜ë‹¨ íƒ­ ë°” */
        #nav-bar {
            position: fixed; bottom: 0; width: 100%; height: 60px; background: #000;
            display: flex; justify-content: space-around; align-items: center; z-index: 100;
            border-top: 0.5px solid #333;
        }
        .nav-item { text-align: center; color: #8e8e8e; font-size: 10px; flex: 1; cursor: pointer; }
        .nav-item.active { color: white; }
        .nav-item span { font-size: 22px; display: block; }

        /* íŒì—… ì§€ë„ */
        #map-popup { position: fixed; top: 50px; left: 10px; right: 10px; bottom: 80px; background: white; border-radius: 20px; z-index: 500; display: none; box-shadow: 0 20px 50px rgba(0,0,0,0.5); overflow: hidden; }
        #map { width: 100%; height: 100%; }
        .close-map { position: absolute; top: 15px; right: 15px; z-index: 600; background: rgba(0,0,0,0.5); color: white; border: none; width: 35px; height: 35px; border-radius: 50%; font-size: 20px; cursor: pointer; }

        /* ì „ë¦¬í’ˆ ì¹´ë“œ */
        #loot-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 2000; display: none; padding: 20px; box-sizing: border-box; overflow-y: auto; }
        .loot-card { background: #121212; border: 1px solid #333; border-radius: 12px; padding: 12px; text-align: center; position: relative; }
        .coupon-badge { position: absolute; top: -5px; right: -5px; background: var(--accent); color: white; padding: 2px 8px; border-radius: 4px; font-size: 10px; font-weight: bold; }
        
        /* ì¿ í°í•¨ ìŠ¤íƒ€ì¼ */
        #coupon-box { margin-top: 30px; border-top: 1px solid #333; padding-top: 20px; }
        .coupon-item { background: white; color: black; border-radius: 10px; padding: 12px; display: flex; align-items: center; gap: 15px; margin-bottom: 12px; border-left: 5px solid var(--accent); }
        .coupon-val { font-weight: 900; color: var(--accent); border-right: 1px dashed #ccc; padding-right: 15px; font-size: 18px; }
        
        /* ìŠ¤í† ë¦¬ ê³µìœ  ì˜¤ë²„ë ˆì´ */
        #story-share-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 5000; display: none; flex-direction: column; align-items: center; justify-content: center; }
    </style>
</head>
<body>

    <div id="news-bar">ğŸ“¡ #KFoodBattle ì‹¤ì‹œê°„ ìŠ¤ìº” ì¤‘... ì‹ ê·œ í¬ìŠ¤íŠ¸ 8ê°œ ë°œê²¬</div>

    <div id="story-bar">
        <div class="story-item"><div class="story-ring"><img src="https://i.pravatar.cc/100?img=1"></div><span class="story-name">ë‚˜ì˜ì‘ì „</span></div>
        <div class="story-item"><div class="story-ring"><img src="https://i.pravatar.cc/100?img=12"></div><span class="story-name">ë¯¸ì‹ëŒ€ì¥</span></div>
        <div class="story-item"><div class="story-ring"><img src="https://i.pravatar.cc/100?img=33"></div><span class="story-name">ì„œìš¸ì •ë³µì</span></div>
        <div class="story-item"><div class="story-ring" style="background:#555;"><img src="https://i.pravatar.cc/100?img=5"></div><span class="story-name">ì¤‘êµ­êµ°ë§¤ë³µ</span></div>
        <div class="story-item"><div class="story-ring"><img src="https://i.pravatar.cc/100?img=22"></div><span class="story-name">ë¶€ì‚°ê°ˆë§¤ê¸°</span></div>
    </div>

    <div id="feed-container">
        <!-- ì¸ìŠ¤íƒ€ í”¼ë“œ 1 -->
        <div class="feed-item">
            <div class="feed-header">
                <img class="profile-pic" src="https://i.pravatar.cc/100?img=32">
                <div class="user-info">
                    <span class="username">ë¯¸ì‹íƒí—˜ê°€_ì„œìš¸</span>
                    <span class="location" onclick="openMapAt(37.5446, 127.0565)">ğŸ“ ì„±ìˆ˜ë™ ì„±ìˆ˜ì¡±ë°œ</span>
                </div>
            </div>
            <img class="feed-bg" src="https://images.unsplash.com/photo-1628253747716-0c4f5c90f75c?auto=format&fit=crop&w=1000&q=80">
            <div class="feed-overlay">
                <div class="status-badge" style="background: var(--china);">ğŸ‡¨ğŸ‡³ ì¤‘êµ­ ì ë ¹ ì¤‘ | ğŸ’° +â‚© 1,000</div>
                <h2 class="res-title">ì„±ìˆ˜ì¡±ë°œ (ë³¸ì )</h2>
                <p class="feed-caption">ì—¬ê¸° ì¡±ë°œì€ ì§„ì§œ ì˜ˆìˆ .. ğŸ– ì¤‘êµ­íŒ€ì´ ì ë ¹ ì¤‘ì¸ë° í•œêµ­êµ° ì†Œì§‘í•©ë‹ˆë‹¤!! #ì„±ìˆ˜ë§›ì§‘ #KFoodBattle</p>
            </div>
            <div class="side-actions">
                <div class="action-item"><span>â¤ï¸</span><label>4.2k</label></div>
                <div class="action-item" onclick="openMapAt(37.5446, 127.0565)"><span>ğŸ“</span><label>ì‘ì „ì§€</label></div>
                <div class="action-item" onclick="alert('ì¹´ë©”ë¼ ì‹¤í–‰ ì¤‘...')"><span>ğŸ“¸</span><label>íƒˆí™˜</label></div>
                <div class="action-item" onclick="openStoryShare('ì„±ìˆ˜ì¡±ë°œ', 'https://images.unsplash.com/photo-1628253747716-0c4f5c90f75c?auto=format&fit=crop&w=1000&q=80')"><span>âœˆï¸</span><label>ìŠ¤í† ë¦¬</label></div>
            </div>
        </div>

        <!-- ì¸ìŠ¤íƒ€ í”¼ë“œ 2 -->
        <div class="feed-item">
            <div class="feed-header">
                <img class="profile-pic" src="https://i.pravatar.cc/100?img=45">
                <div class="user-info">
                    <span class="username">Busan_Hero</span>
                    <span class="location" onclick="openMapAt(35.1021, 129.0315)">ğŸ“ ë¶€ì‚° ì´ì¬ëª¨í”¼ì</span>
                </div>
            </div>
            <img class="feed-bg" src="https://images.unsplash.com/photo-1513104890138-7c749659a591?auto=format&fit=crop&w=1000&q=80">
            <div class="feed-overlay">
                <div class="status-badge" style="background: var(--korea);">ğŸ‡°ğŸ‡· í•œêµ­êµ° ìˆ˜ë¹„ ì¤‘ | ğŸ›¡ï¸ ì² í†µë³´ì•ˆ</div>
                <h2 class="res-title">ì´ì¬ëª¨í”¼ì ë³¸ì </h2>
                <p class="feed-caption">ë¶€ì‚°ì˜ ì‹¬ì¥ ì´ì¬ëª¨í”¼ì! ìš°ë¦¬íŒ€ì´ ì§€ì¼œë‚´ê³  ìˆìŠµë‹ˆë‹¤ ğŸ• #ë¶€ì‚°ë§›ì§‘ #KFoodBattle</p>
            </div>
            <div class="side-actions">
                <div class="action-item"><span>â¤ï¸</span><label>8.1k</label></div>
                <div class="action-item" onclick="openMapAt(35.1021, 129.0315)"><span>ğŸ“</span><label>ì‘ì „ì§€</label></div>
                <div class="action-item"><span>ğŸ°</span><label>ìˆ˜ë¹„</label></div>
                <div class="action-item" onclick="openStoryShare('ì´ì¬ëª¨í”¼ì', 'https://images.unsplash.com/photo-1513104890138-7c749659a591?auto=format&fit=crop&w=1000&q=80')"><span>âœˆï¸</span><label>ìŠ¤í† ë¦¬</label></div>
            </div>
        </div>
    </div>

    <!-- íŒì—… ì§€ë„ -->
    <div id="map-popup"><button class="close-map" onclick="closeMap()">Ã—</button><div id="map"></div></div>

    <!-- ì „ë¦¬í’ˆ ë° ì¿ í° ë³´ê´€í•¨ -->
    <div id="loot-container">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h2 style="margin: 0; color: var(--gold); font-size: 20px;">ğŸƒ ì „ë¦¬í’ˆ & ğŸ í˜œíƒ</h2>
            <button onclick="showSection('feed')" style="background: none; border: none; color: white; font-size: 24px;">Ã—</button>
        </div>

        <!-- ì¸í”Œë£¨ì–¸ì„œ ë­í‚¹ ìš”ì•½ -->
        <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 12px; margin-bottom: 25px; border: 1px solid #333;">
            <div style="font-size: 11px; color: #94a3b8; margin-bottom: 8px;">ğŸ† ì‹¤ì‹œê°„ ë¯¸ì‹ ì¸í”Œë£¨ì–¸ì„œ TOP 3</div>
            <div style="display: flex; justify-content: space-between; font-size: 13px;">
                <span>ğŸ¥‡ ë¯¸ì‹ëŒ€ì¥ <small style="color:var(--accent)">12.4k Reach</small></span>
                <span>ğŸ¥ˆ ì„œìš¸ì •ë³µì <small style="color:var(--accent)">8.1k</small></span>
                <span>ğŸ¥‰ ë¶€ì‚°ê°ˆë§¤ê¸° <small style="color:var(--accent)">5.2k</small></span>
            </div>
        </div>

        <div id="card-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
            <div class="loot-card">
                <span class="coupon-badge">êµí™˜ê°€ëŠ¥</span>
                <div style="font-size: 9px; color: var(--gold); margin-bottom: 5px; font-weight: bold;">LEGENDARY</div>
                <img src="https://images.unsplash.com/photo-1628253747716-0c4f5c90f75c?auto=format&fit=crop&w=150&q=80" style="width: 100%; height: 100px; object-fit: cover; border-radius: 8px;">
                <b style="display: block; margin-top: 8px; font-size: 13px;">ì„±ìˆ˜ì¡±ë°œ</b>
                <button onclick="exchangeCoupon('ì„±ìˆ˜ì¡±ë°œ 10% í• ì¸ê¶Œ')" style="width: 100%; background: white; border: none; border-radius: 5px; color: black; font-size: 10px; padding: 5px; margin-top: 8px; font-weight: bold;">ğŸ ì¿ í°êµí™˜</button>
                <button onclick="openStoryShare('ì„±ìˆ˜ì¡±ë°œ', 'https://images.unsplash.com/photo-1628253747716-0c4f5c90f75c?auto=format&fit=crop&w=150&q=80')" style="width: 100%; background: var(--insta-gradient); border: none; border-radius: 5px; color: white; font-size: 10px; padding: 5px; margin-top: 5px; font-weight: bold;">ìŠ¤í† ë¦¬ ê³µìœ </button>
            </div>
        </div>

        <!-- ì¿ í°í•¨ -->
        <div id="coupon-box">
            <h3 style="font-size: 16px; color: white; margin-bottom: 15px;">ğŸ« ë‚´ ë³´ìœ  ì¿ í°</h3>
            <div id="coupon-list">
                <div id="empty-msg" style="color: #666; font-size: 12px; text-align: center; padding: 20px;">ë³´ìœ í•œ ì‹¤ë¬¼ ì¿ í°ì´ ì—†ìŠµë‹ˆë‹¤.</div>
            </div>
        </div>
    </div>

    <!-- ìŠ¤í† ë¦¬ ê³µìœ  ì˜¤ë²„ë ˆì´ -->
    <div id="story-share-overlay">
        <div style="width: 300px; height: 530px; background: var(--insta-gradient); border-radius: 20px; padding: 15px; position: relative; box-shadow: 0 20px 50px rgba(0,0,0,0.5);">
            <div style="background: white; width: 100%; height: 100%; border-radius: 15px; overflow: hidden; display: flex; flex-direction: column;">
                <img id="story-img" src="" style="width: 100%; height: 65%; object-fit: cover;">
                <div style="padding: 15px; text-align: center; color: #000;">
                    <div style="font-size: 11px; font-weight: bold; color: var(--accent);">CONQUEST SUCCESS</div>
                    <h2 id="story-title" style="margin: 5px 0; font-size: 22px;">ì ë ¹ ì™„ë£Œ</h2>
                    <p style="font-size: 13px; margin: 5px 0;">ëŒ€í•œë¯¼êµ­ì˜ ì´ë¦„ìœ¼ë¡œ<br>ì´ ë•…ì„ ìˆ˜í˜¸í•©ë‹ˆë‹¤! ğŸ‡°ğŸ‡·</p>
                    <div style="margin-top: 15px; font-size: 9px; opacity: 0.4;">@KFoodBattle_Conquest</div>
                </div>
            </div>
            <div style="position: absolute; top: 25px; right: -10px; background: #fbbf24; color: black; padding: 4px 12px; border-radius: 8px; font-weight: 900; transform: rotate(15deg); font-size: 14px; box-shadow: 0 5px 10px rgba(0,0,0,0.2);">VICTORY!</div>
        </div>
        <div style="margin-top: 25px; display: flex; gap: 15px;">
            <button onclick="closeStory()" style="background: #333; color: white; border: none; padding: 10px 25px; border-radius: 25px; font-weight: bold; font-size: 14px;">ë‹«ê¸°</button>
            <button onclick="alert('ì¸ìŠ¤íƒ€ê·¸ë¨ ì•±ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤!')" style="background: var(--insta-gradient); color: white; border: none; padding: 10px 25px; border-radius: 25px; font-weight: bold; font-size: 14px;">ê³µìœ í•˜ê¸°</button>
        </div>
    </div>

    <!-- í•˜ë‹¨ íƒ­ ë°” -->
    <div id="nav-bar">
        <div id="nav-feed" class="nav-item active" onclick="showSection('feed')"><span>ğŸ </span>í™ˆ</div>
        <div id="nav-map" class="nav-item" onclick="openMapAt(36.2, 127.8, 7)"><span>ğŸ—ºï¸</span>ì‘ì „ì§€ë„</div>
        <div id="nav-loot" class="nav-item" onclick="showSection('loot')"><span>ğŸƒ</span>ì „ë¦¬í’ˆ</div>
        <div id="nav-shop" class="nav-item"><span>ğŸ›’</span>ìƒì </div>
        <div id="nav-profile" class="nav-item"><span>ğŸ‘¤</span>í”„ë¡œí•„</div>
    </div>

    <script>
        const map = L.map('map', { zoomControl: false, attributionControl: false });
        L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png').addTo(map);

        function showSection(id) {
            document.getElementById('loot-container').style.display = (id === 'loot' ? 'block' : 'none');
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            document.getElementById('nav-' + id).classList.add('active');
        }

        function openMapAt(lat, lng, zoom = 16) {
            document.getElementById('map-popup').style.display = 'block';
            map.invalidateSize();
            map.setView([lat, lng], zoom);
            L.marker([lat, lng]).addTo(map);
        }

        function closeMap() { document.getElementById('map-popup').style.display = 'none'; }

        function openStoryShare(title, imgUrl) {
            document.getElementById('story-title').innerText = title + " ì ë ¹";
            document.getElementById('story-img').src = imgUrl;
            document.getElementById('story-share-overlay').style.display = 'flex';
        }

        function closeStory() { document.getElementById('story-share-overlay').style.display = 'none'; }

        function exchangeCoupon(couponName) {
            if(confirm(`[${couponName}]ìœ¼ë¡œ êµí™˜í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (ì¹´ë“œ 1ì¥ì´ ì†Œëª¨ë©ë‹ˆë‹¤)`)) {
                const list = document.getElementById('coupon-list');
                const empty = document.getElementById('empty-msg');
                if(empty) empty.remove();
                
                const div = document.createElement('div');
                div.className = 'coupon-item';
                div.innerHTML = `
                    <div class="coupon-val">OFF</div>
                    <div style="flex-grow:1;">
                        <b style="font-size:14px;">${couponName}</b><br>
                        <small style="color:#666;">ìœ íš¨ê¸°ê°„: 2026.12.31</small>
                    </div>
                    <button onclick="alert('ì§ì› í™•ì¸ìš© ì½”ë“œ: KFOOD-7788')" style="background:#eee; border:none; padding:5px 10px; border-radius:5px; font-size:10px;">ì‚¬ìš©í•˜ê¸°</button>
                `;
                list.appendChild(div);
                alert('ğŸ‰ ì¿ í° êµí™˜ ì„±ê³µ! ë‚´ ë³´ìœ  ì¿ í°í•¨ì„ í™•ì¸í•˜ì„¸ìš”.');
            }
        }

        setInterval(() => {
            const news = ["ğŸ“¡ #KFoodBattle ìŠ¤ìº”: ì„±ìˆ˜ë™ ì‹ ê·œ í¬ìŠ¤íŠ¸ ê°ì§€", "ğŸ”¥ ì†ë³´: ì¤‘êµ­íŒ€ ëª…ë™ ëŒ€ê·œëª¨ ê³µì„¸ ì¤‘", "ğŸ“¸ ì•Œë¦¼: ë°©ê¸ˆ ìƒˆë¡œìš´ ì •ë³µ ìŠ¤í† ë¦¬ê°€ ê³µìœ ë¨"];
            document.getElementById('news-bar').innerText = news[Math.floor(Math.random()*news.length)];
        }, 5000);
    </script>
</body>
</html>